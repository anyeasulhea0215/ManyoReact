<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/assets/css/mypage.css}"/>
    <title>마이페이지 - 위시리스트</title>
</head>
<body>

<header th:replace="fragments/header :: my-header"></header>

<main>
    <aside>
        <h2>마이페이지</h2>

        <h3>쇼핑정보</h3>
        <ul>
            <li><a th:href="@{/mypage/orders}">주문목록/배송조회</a></li>
            <li><a th:href="@{/mypage/returns}">취소/반품/교환 내역</a></li>
            <li><a th:href="@{/mypage/refund}">환불/입금 내역</a></li>
            <li><a th:href="@{/mypage/wishlist}">위시리스트</a></li>
        </ul>

        <hr/>

        <h3>고객센터</h3>
        <ul>
            <li><a th:href="@{/mypage/inquiry}">1:1 문의</a></li>
        </ul>

        <hr/>

        <h3>회원정보</h3>
        <ul>
            <li><a th:href="@{/mypage/member-edit}">회원정보 변경</a></li>
            <li><a th:href="@{/mypage/withdraw}">회원 탈퇴</a></li>
        </ul>

        <hr/>

        <h3>나의 상품문의</h3>
        <ul>
            <li><a th:href="@{/mypage/product-inquiries}">나의 상품문의</a></li>
        </ul>

        <hr/>

        <h3>나의 상품후기</h3>
        <ul>
            <li><a th:href="@{/reviews/mine}">나의 상품후기</a></li>
        </ul>
    </aside>

    <div class="content-wrapper">
        <section class="order-list">

            <h2>위시리스트</h2>
            <hr class="order-title-line">
            <form th:action="@{/mypage/wishlist/delete/all}" method="post" style="text-align:left;">
                <button type="submit">전체삭제</button>
            </form>
            <form th:action="@{/mypage/wishlist/delete}" method="post" id="deleteForm">
                <div class="wishlist-controls" style="text-align:right; margin-bottom:10px;">
                    <button type="submit" formaction="#" formmethod="post"
                            th:formaction="@{/mypage/wishlist/add-to-cart}" class="btn-cart">
                        선택 상품 장바구니
                    </button>
                    <button type="submit" class="btn-delete">선택 상품 삭제</button>
                </div>
                <table class="order-table">
                    <thead>
                    <tr>
                        <th><input type="checkbox" onclick="toggleAll(this)" />전체선택</th>
                        <th>상품명/옵션</th>
                        <th>수량</th>
                        <th>상품금액</th>
                        <th>혜택</th>
                    </tr>
                    </thead>
                    <tbody th:each="item : ${wishlist}">
                    <tr>
                        <td><input type="checkbox" name="wishlistIds" th:value="${item.wishlistId}" /></td>
                        <td>
                            <img th:src="${item.productImg}" alt="상품 이미지" style="width:80px; height:auto;" />
                            <br/>
                            <span th:text="${item.productName}">상품명</span><br/>
                            <small th:text="${item.optionInfo}">옵션 정보</small>
                        </td>
                        <td th:text="${item.quantity}">1</td>
                        <td th:text="${#numbers.formatInteger(item.productPrice, 0, 'COMMA')} + '원'">가격</td>
                        <td>혜택 정보</td>
                    </tr>
                    </tbody>
                </table>

            </form>

        </section>
    </div>
</main>

<div th:replace="~{fragments/footer :: my-footer}"></div>
<script th:src="@{/assets/js/logout.js}"></script>
<script>
function toggleAll(source) {
const checkboxes = document.querySelectorAll('input[name="wishlistIds"]');
checkboxes.forEach(cb => cb.checked = source.checked);
}
</script>
</body>
</html>
